# 记数法

**一片两片三四片，五六七八九十片。千片万片无数片，飞入梅花都不见。——《咏雪》**

在之前的介绍中，我们用空集和后继运算构造出了自然数。应当注意的是，自然数是抽象概念，我们所用的记号只是对这些抽象概念的指代，而非这些抽象概念本身。因此，我们使用什么样的符号表示自然数，并不改变自然数的性质。你可以使用“one”、“two”、“three”等符号来表示，也可以使用“1”、“2”、“3”，还可以使用“一”，“二”，“三”，或者别的什么符号。这一期，我们就来讨论一下一般都用什么符号来表示自然数，以及用什么样的符号来表示自然数是合适的。

## 一数一符

最容易想到的表示自然数的方法之一就是为每一个自然数发明一个符号。就像我们之前展示的那样，对于十以下（不包括十）的自然数，印度-阿拉伯数字就采用一数一符的办法给零到九这十个自然数每个发明了一个专用符号。我们可以顺着这个思路继续往后拓展：

> $0 ::= \empty$
>
> $1 ::= 0 \cup \{0\}$
>
> $2 ::= 1 \cup \{1\}$
>
> $...$
>
> $9 ::= 8 \cup \{8\}$
>
> $A ::= 9 \cup \{9\}$
>
> $B ::= A \cup \{A\}$
>
> $C ::= B \cup \{B\}$
>
> $...$

在这种符号定义下，9+1所得的结果是“A”而不是“10”，9+2和A+1的结果是“B”，每次加法运算都是单纯的查表，没有任何进位操作。

这种表示方法的缺陷在于，理论上需要无穷个彼此不同的符号才能表示所有自然数。即便实际使用中用不到无穷个符号，当要处理的数字比较多的时候，记忆那么多符号也是非常困难的。

## 组合符号

那么能不能少用一些符号来表示数字呢？我们可以用组合符号的办法。首先我们只给部分自然数发明符号，并且规定连写若干个数字符号表示将它们加起来。当需要表示没有专用符号的数的时候，就用若干其他数的和表示它。这个思路就和罗马数字比较接近了，但常见的罗马数字还是用了一些位置关系，所以我们举一个和罗马数字不太一样的例子：

>$O ::= \empty$
>
>$I :: = O \cup \{O\}$
>
>$V :: = I + I + I + I+I$
>
>$X :: = V + V$
>
>$L ::= X+X+X+X+X$
>
>$C :: = L+L$
>
>$D :: = C+C+C+C+C$
>
>$M ::= D+D$

这类我们只定义了八个符号，但可以用它表示所有数字，例如：

> $O ::= \empty$
>
> $I :: = O \cup \{O\}$
>
> $II = I \cup \{I\}$
>
> $III = II \cup \{II\}$
>
> $IIII = IIII \cup \{IIII\}$
>
> $V = IIII \cup \{IIII\}$
>
> $VI = V \cup \{V\}$
>
> $VII = VI \cup \{VI\}$
>
> $VIII = VII \cup \{VII\}$
>
> $VIIII = VIII \cup \{VIII\}$
>
> $X = VIIII \cup \{VIIII\}$
>
> $...$

利用这个方法，理论上可以用有限个符号相互组合表示无限的数字，但当数字变大的时候表数字会越写越长，而改进的办法就是不断发明新的符号。

## 单位

那么有什办法可以不用发明新符号，还把数字写得比较简短呢？观察组合符号记数法中的符号定义就能发现，其中$V,L,D$的定义是相似的，$X,C,M$的定义也是相似的。我们可以用一个办法用一个符号替代$V,L,D$和所有有类似定义的符号，也可以用一个符号表示$X,C,M$等所有有类似定义的符号。为了简单起见，我们先从符号系统中去掉$V,L,D$，仅考虑$X,C,M$。这样，符号定义可以重写为：

> $X ::= I+I+I+I+I+I+I+I+I+I$
>
> $C ::= X+X+X+X+X+X+X+X+X$
>
> $M ::= C+C+C+C+C+C+C+C+C+C$

它们的定义形式仍旧是相似的，都是十个相同的符号相加，我们定义一个新符号$P$，它表示对它之前的数进行这个操作。例如，$IP$表示$I+I+I+I+I+I+I+I+I+I$，$XP$表示$X+X+X+X+X+X+X+X+X$。这样定义的新写法就是：

> $X ::= IP$
>
> $C ::= XP$
>
> $M ::= CP$

我们额外规定并且如果$P$之前还是$P$，就表示后边的$P$对前边$P$操作的结果再进行一遍操作。这样$M$实际上也可以定义为$IPP$。而两个带$P$的式子连写表示加和。

这样$MMMMMMMMMMMMXXIII$就可以写为$IPPPIPPIPPIPIPIII$。这样我们就可以用$P$不断组合表示大数，而不需要一直发明新符号来表示大数（我们可以把$P$的任意次重复称为“单位”）。但这个写法还是不够精简，为了防止$IPIP$这样的写法反复出现影响可读性，我们用十个单独的符号表示$O$到$IP$之间（不含$IP$）的数字，例如：

> $B ::= I+I$
>
> $C ::= I+I+I$
>
> $D ::= I+I+I+I$
>
> $E ::= I+I+I+I+I$
>
> $F ::= I+I+I+I+I+I$
>
> $G ::= I+I+I+I+I+I+I$
>
> $H ::= I+I+I+I+I+I+I+I$
>
> $J ::= I+I+I+I+I+I+I+I+I$

这样$IPPPIPPIPPIPIPIII$就可以进一步简化为$IPPPBPPBPC$。

## 位置记数法

经过之前的简化我们发现，其中最干扰我们阅读的就是符号$P$，那么能不能直接把$P$省略呢？我们之前一直注意把一个组合式中较大的部分（如$IPPP$）往左写，较小的部分（如$C$）往右写。在单位不会重复出现的情况下（指一个数的表达式中不会两次出现$PP$之类的情况），实际上各个部分的位置就表示了其单位。为了让这种关系更明显，我们要求当一个数中最多出现$n$次$P$的重复时，不带$P$的部分必须出现，$P$的$1$次重复到$n-1$次重复也必须出现，如果本来没有出现就用$O$加单位占位。这样$BPPPPIPPC$就应当写为$BPPPPOPPPIPPOPC$，$GPP$就写为$GPPOPO$。

不难看出，每个数的表示中$P$可能出现的位置都是固定的，除了$P$以外符号的位置就表明了其单位，既然这样为什么部干脆省略掉所有$P$用距离最右边一个独立符号的位置来表示单位呢。于是$BPPPPOPPPIPPOPC$就成了$BOIOC$，$GPPOPO$就成了$GOO$。我们之前举例的$IPPPBPPBPC$就进一步简化为$IBBC$，相比起最初的$MMMMMMMMMMMMXXIII$这是非常大的简化，而且可读性大大提升。最后用熟悉的印度-阿拉伯数字符号替换掉字母：

>$0 ::=O$
>
>$1 ::=I$
>
>$2 ::=B$
>
>$3 ::=C$
>
>$4 ::=D$
>
>$5 ::=E$
>
>$6 ::=F$
>
>$7 ::=G$
>
>$8 ::=H$
>
>$9 ::=8$

替换之后$IBBC$就成了$1223$。

## 进制

我们之前约定的$P$表示把十个P之前的数相加，但最初的$V$实际上是五个$I$相加得到的。如果把$P$定义为五个$P$之前的数相加，也可以定义对应的位置记数法，只不过需要的基本符号会减少到五个，此时得到的表示自然数的符号序列就称为“五进制数”。而我们之前定义的表示十个$P$之前的数相加所得的符号序列就叫“十进制数”。

一般的，如果把$P$定义为表示$k$个$P$之前的数相加，那么最终简化所得的自然数表示就称为“$k$进制数”（$k>0, k\in N$）。

注意，不同的进制和不同的基本符号只是数的不同表达方式，变换表达方式并不对数本身造成改变。例如十进制的$5$，五进制的$10$，以及组合表示法中的$V$表示的其实是同一个数，它是$\empty$的后继的后继的后继的后继的后继。

## 二进制

只用一个符号是无法使用位置记数法的，因此最节省符号的位置记数法是二进制位置记数法。二进制的基本符号定义为：

> $0 ::= \empty$
>
> $1 ::= 0 \cup \{0\}$

那个被省略掉的单位$P$表示两个$P$之前的数相加，也就是$1P$表示$1+1$，$1PP$表示$(1+1)+(1+1)$。$110$省略之前写作$1PP1P0$，表示$((1+1)+(1+1))+(0+0)+(1)$。当然了，一般教材使用指数表示权重，这样写更简短一些$1\times2^2+0\times 2^1+1\times 2^0$。

二进制和十进制之间的转换操作并不复杂，二转十就是逐位乘权重加和，十转二就是除整取余迭代（两个方向的转换都到在十进制的运算法则里进行）。数字比较小的时候，更简单的办法是逐个数数，做一张转换表，查表转换。我们这里就不纠结这些运算了，因为计算机可以自动转换，需要转换的时候用计算机转换就好了。

## 二的幂次进制

二进制符号个数最少，但是同样的数字写出来也最长。因此有一些缩减二进制数书写长度的办法。其中的一种办法就是把二进制数用二的幂次进制数书写。二的幂次数包括四、八、十六、三十二等，用它们作为位权，所得的进制数可以和二进制数快速转换，例如四位二进制数可以直接转换谓一位十六进制数，这样就能缩减书写长度。

那么，古尔丹，用二的幂次进制数缩减书写长度的代价是什么呢？代价就是所用的基本符号又变多了。因此太大的进制我们一般不用（记不住那么多符号），最常用的就是十六进制数。其标准表示就是用十个阿拉伯数字和A到F六个字母（字母分别表示十进制的$10$到$15$）来作为基本符号。

举个例子二进制数$10011100$在十六进制可以写为$9C$。